import{T as $,e as q,H as I,o as p,c as v,b as n,w as a,K as y,O as P,N as w,J as T,a as l,s as F,t as b,d as g,r as J,Q as K,z as x,V,W as k,a$ as C,X as N,b0 as D,Y as A,b3 as L,b1 as M,b2 as Q,_ as R}from"./HgGXboyc.js";import{j as W,i as X,e as Y,p as G,V as B,l as U,g as S}from"./Ba4EjnGA.js";import{V as Z}from"./yud45zWJ.js";const H={class:"position-relative overflow-hidden"},ee={class:"glass-badge px-4 py-1 rounded-pill"},te={class:"text-body-1 font-weight-black text-blue-grey-darken-4 mb-3 news-title"},se={class:"text-caption text-grey-darken-1 mb-6 leading-relaxed"},ae={class:"d-flex align-center justify-space-between"},oe=$({__name:"NoticiasCard",props:{numberOfcards:{}},setup(E){const j=E,{$db:m}=q(),f=x([]),c=x(null),i=x(!1),d=j.numberOfcards||6,_=(t,e)=>t.length>e?t.substring(0,e)+"...":t,h=async t=>{const e=[];for(const s of t.docs){const o=s.data();let r={nombre:"SEA Coahuila"};if(o.autor){const u=await M(Q(m,"autores",o.autor));u.exists()&&(r=u.data())}e.push({titulo:_(o.titulo||"",40),excerpt:_(o.excerpt||"",120),imagen:o.imagen||"",enlace:o.documento?o.contenido:`/publicaciones/nota?id=${s.id}`,autor:r})}return e},z=async()=>{try{const t=V(k(m,"publicaciones"),C("status","==","0"),N("publishAt","desc"),D(d)),e=await A(t);e.empty||(c.value=e.docs[e.docs.length-1],f.value=await h(e),i.value=e.docs.length===d)}catch(t){console.error("Error al obtener publicaciones:",t)}},O=async()=>{if(c.value)try{const t=V(k(m,"publicaciones"),C("status","==","0"),N("publishAt","desc"),L(c.value),D(d)),e=await A(t);if(e.empty)i.value=!1;else{c.value=e.docs[e.docs.length-1];const s=await h(e);f.value.push(...s),i.value=e.docs.length===d}}catch(t){console.error("Error en paginación:",t)}};return I(()=>{z()}),(t,e)=>(p(),v(y,null,[n(S,{class:"mt-8"},{default:a(()=>[(p(!0),v(y,null,P(f.value,(s,o)=>(p(),w(W,{key:o,cols:"12",sm:"6",lg:"4",xl:"3",class:"pa-4"},{default:a(()=>[n(Z,null,{default:a(({isHovering:r,props:u})=>[n(X,T({ref_for:!0},u,{href:s.enlace,target:"_blank",class:"mx-auto rounded-xl news-card-premium overflow-hidden",elevation:r?12:2}),{default:a(()=>[l("div",H,[n(Y,{height:"280px",src:s.imagen,cover:"",class:"transition-all duration-500",style:F(r?"transform: scale(1.1)":"")},{default:a(()=>[e[1]||(e[1]=l("div",{class:"fill-height bottom-gradient"},null,-1)),l("div",ee,b(s.autor?.nombre||"SEA"),1)]),_:2},1032,["src","style"])]),n(G,{class:"pa-6"},{default:a(()=>[l("h2",te,b(s.titulo),1),l("p",se,b(s.excerpt),1),l("div",ae,[n(B,{variant:"text",color:r?"amber-darken-2":"grey-darken-2",class:"px-0 text-none font-weight-bold","suffix-icon":"mdi-arrow-right"},{default:a(()=>[e[3]||(e[3]=g(" Continuar leyendo ",-1)),n(U,{end:"",class:J([r?"translate-x-icon":"","transition-all"])},{default:a(()=>[...e[2]||(e[2]=[g("mdi-arrow-right",-1)])]),_:1},8,["class"])]),_:2},1032,["color"])])]),_:2},1024)]),_:2},1040,["href","elevation"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),i.value?(p(),w(S,{key:0,class:"justify-center mt-12"},{default:a(()=>[n(B,{variant:"outlined",color:"cyan-darken-2",size:"small",rounded:"xl",class:"text-none px-12",onClick:e[0]||(e[0]=s=>O())},{default:a(()=>[...e[4]||(e[4]=[g(" Descubrir más historias ",-1)])]),_:1})]),_:1})):K("",!0)],64))}}),ce=Object.assign(R(oe,[["__scopeId","data-v-afb49e4e"]]),{__name:"NoticiasCard"});export{ce as _};
