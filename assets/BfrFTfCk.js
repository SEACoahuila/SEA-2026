import{_ as x}from"./B1_csP8t.js";import{_ as w}from"./Dp9jb25-.js";import{_ as y,e as C,H as D,N,w as _,V,W as v,a$ as $,X as k,b0 as A,Y as B,z as c,b1 as S,b2 as q,o as P,b as n,$ as i}from"./HgGXboyc.js";import{k as j,j as z}from"./Ba4EjnGA.js";import"./B0QrjFMg.js";import"./yud45zWJ.js";import"./DRS-OM4f.js";const m=6,E={__name:"index",setup(H){const{$db:r}=C(),e=c({color:"#178c25",title:"Noticias",icon:"mdi-comma-circle-outline"}),d=c([]),b=c(null),f=c(!1),l=(t,o)=>t.length>o?t.substring(0,o)+"...":t,h=async t=>{const o=[];for(const s of t.docs){const a=s.data();let u={nombre:"SEA Coahuila"};if(a.autor){const p=await S(q(r,"autores",a.autor));p.exists()&&(u=p.data())}o.push({titulo:l(a.titulo||"",40),excerpt:l(a.excerpt||"",200),imagen:a.imagen,enlace:a.documento?a.contenido:`/publicaciones/nota?id=${s.id}`,autor:u})}return o},g=async()=>{try{const t=V(v(r,"publicaciones"),$("status","==","0"),k("publishAt","desc"),A(m)),o=await B(t);o.empty||(b.value=o.docs[o.docs.length-1],d.value=await h(o),f.value=o.docs.length===m)}catch(t){console.error(t)}};return D(()=>g()),(t,o)=>{const s=x,a=w;return P(),N(j,{class:""},{default:_(()=>[n(s,{color:i(e).color,title:i(e).title,icon:i(e).icon},null,8,["color","title","icon"]),n(z,null,{default:_(()=>[n(a)]),_:1})]),_:1})}}},G=y(E,[["__scopeId","data-v-1532bb21"]]);export{G as default};
